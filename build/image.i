# 0 "src/image.c"
# 0 "<built-in>"
# 0 "<command-line>"
# 1 "/usr/include/stdc-predef.h" 1 3 4
# 0 "<command-line>" 2
# 1 "src/image.c"
# 1 "/usr/include/stdio.h" 1 3 4
# 27 "/usr/include/stdio.h" 3 4
# 1 "/usr/include/x86_64-linux-gnu/bits/libc-header-start.h" 1 3 4
# 33 "/usr/include/x86_64-linux-gnu/bits/libc-header-start.h" 3 4
# 1 "/usr/include/features.h" 1 3 4
# 394 "/usr/include/features.h" 3 4
# 1 "/usr/include/features-time64.h" 1 3 4
# 20 "/usr/include/features-time64.h" 3 4
# 1 "/usr/include/x86_64-linux-gnu/bits/wordsize.h" 1 3 4
# 21 "/usr/include/features-time64.h" 2 3 4
# 1 "/usr/include/x86_64-linux-gnu/bits/timesize.h" 1 3 4
# 19 "/usr/include/x86_64-linux-gnu/bits/timesize.h" 3 4
# 1 "/usr/include/x86_64-linux-gnu/bits/wordsize.h" 1 3 4
# 20 "/usr/include/x86_64-linux-gnu/bits/timesize.h" 2 3 4
# 22 "/usr/include/features-time64.h" 2 3 4
# 395 "/usr/include/features.h" 2 3 4
# 502 "/usr/include/features.h" 3 4
# 1 "/usr/include/x86_64-linux-gnu/sys/cdefs.h" 1 3 4
# 576 "/usr/include/x86_64-linux-gnu/sys/cdefs.h" 3 4
# 1 "/usr/include/x86_64-linux-gnu/bits/wordsize.h" 1 3 4
# 577 "/usr/include/x86_64-linux-gnu/sys/cdefs.h" 2 3 4
# 1 "/usr/include/x86_64-linux-gnu/bits/long-double.h" 1 3 4
# 578 "/usr/include/x86_64-linux-gnu/sys/cdefs.h" 2 3 4
# 503 "/usr/include/features.h" 2 3 4
# 526 "/usr/include/features.h" 3 4
# 1 "/usr/include/x86_64-linux-gnu/gnu/stubs.h" 1 3 4
# 10 "/usr/include/x86_64-linux-gnu/gnu/stubs.h" 3 4
# 1 "/usr/include/x86_64-linux-gnu/gnu/stubs-64.h" 1 3 4
# 11 "/usr/include/x86_64-linux-gnu/gnu/stubs.h" 2 3 4
# 527 "/usr/include/features.h" 2 3 4
# 34 "/usr/include/x86_64-linux-gnu/bits/libc-header-start.h" 2 3 4
# 28 "/usr/include/stdio.h" 2 3 4





# 1 "/usr/lib/gcc/x86_64-linux-gnu/13/include/stddef.h" 1 3 4
# 214 "/usr/lib/gcc/x86_64-linux-gnu/13/include/stddef.h" 3 4

# 214 "/usr/lib/gcc/x86_64-linux-gnu/13/include/stddef.h" 3 4
typedef long unsigned int size_t;
# 34 "/usr/include/stdio.h" 2 3 4


# 1 "/usr/lib/gcc/x86_64-linux-gnu/13/include/stdarg.h" 1 3 4
# 40 "/usr/lib/gcc/x86_64-linux-gnu/13/include/stdarg.h" 3 4
typedef __builtin_va_list __gnuc_va_list;
# 37 "/usr/include/stdio.h" 2 3 4

# 1 "/usr/include/x86_64-linux-gnu/bits/types.h" 1 3 4
# 27 "/usr/include/x86_64-linux-gnu/bits/types.h" 3 4
# 1 "/usr/include/x86_64-linux-gnu/bits/wordsize.h" 1 3 4
# 28 "/usr/include/x86_64-linux-gnu/bits/types.h" 2 3 4
# 1 "/usr/include/x86_64-linux-gnu/bits/timesize.h" 1 3 4
# 19 "/usr/include/x86_64-linux-gnu/bits/timesize.h" 3 4
# 1 "/usr/include/x86_64-linux-gnu/bits/wordsize.h" 1 3 4
# 20 "/usr/include/x86_64-linux-gnu/bits/timesize.h" 2 3 4
# 29 "/usr/include/x86_64-linux-gnu/bits/types.h" 2 3 4


typedef unsigned char __u_char;
typedef unsigned short int __u_short;
typedef unsigned int __u_int;
typedef unsigned long int __u_long;


typedef signed char __int8_t;
typedef unsigned char __uint8_t;
typedef signed short int __int16_t;
typedef unsigned short int __uint16_t;
typedef signed int __int32_t;
typedef unsigned int __uint32_t;

typedef signed long int __int64_t;
typedef unsigned long int __uint64_t;






typedef __int8_t __int_least8_t;
typedef __uint8_t __uint_least8_t;
typedef __int16_t __int_least16_t;
typedef __uint16_t __uint_least16_t;
typedef __int32_t __int_least32_t;
typedef __uint32_t __uint_least32_t;
typedef __int64_t __int_least64_t;
typedef __uint64_t __uint_least64_t;



typedef long int __quad_t;
typedef unsigned long int __u_quad_t;







typedef long int __intmax_t;
typedef unsigned long int __uintmax_t;
# 141 "/usr/include/x86_64-linux-gnu/bits/types.h" 3 4
# 1 "/usr/include/x86_64-linux-gnu/bits/typesizes.h" 1 3 4
# 142 "/usr/include/x86_64-linux-gnu/bits/types.h" 2 3 4
# 1 "/usr/include/x86_64-linux-gnu/bits/time64.h" 1 3 4
# 143 "/usr/include/x86_64-linux-gnu/bits/types.h" 2 3 4


typedef unsigned long int __dev_t;
typedef unsigned int __uid_t;
typedef unsigned int __gid_t;
typedef unsigned long int __ino_t;
typedef unsigned long int __ino64_t;
typedef unsigned int __mode_t;
typedef unsigned long int __nlink_t;
typedef long int __off_t;
typedef long int __off64_t;
typedef int __pid_t;
typedef struct { int __val[2]; } __fsid_t;
typedef long int __clock_t;
typedef unsigned long int __rlim_t;
typedef unsigned long int __rlim64_t;
typedef unsigned int __id_t;
typedef long int __time_t;
typedef unsigned int __useconds_t;
typedef long int __suseconds_t;
typedef long int __suseconds64_t;

typedef int __daddr_t;
typedef int __key_t;


typedef int __clockid_t;


typedef void * __timer_t;


typedef long int __blksize_t;




typedef long int __blkcnt_t;
typedef long int __blkcnt64_t;


typedef unsigned long int __fsblkcnt_t;
typedef unsigned long int __fsblkcnt64_t;


typedef unsigned long int __fsfilcnt_t;
typedef unsigned long int __fsfilcnt64_t;


typedef long int __fsword_t;

typedef long int __ssize_t;


typedef long int __syscall_slong_t;

typedef unsigned long int __syscall_ulong_t;



typedef __off64_t __loff_t;
typedef char *__caddr_t;


typedef long int __intptr_t;


typedef unsigned int __socklen_t;




typedef int __sig_atomic_t;
# 39 "/usr/include/stdio.h" 2 3 4
# 1 "/usr/include/x86_64-linux-gnu/bits/types/__fpos_t.h" 1 3 4




# 1 "/usr/include/x86_64-linux-gnu/bits/types/__mbstate_t.h" 1 3 4
# 13 "/usr/include/x86_64-linux-gnu/bits/types/__mbstate_t.h" 3 4
typedef struct
{
  int __count;
  union
  {
    unsigned int __wch;
    char __wchb[4];
  } __value;
} __mbstate_t;
# 6 "/usr/include/x86_64-linux-gnu/bits/types/__fpos_t.h" 2 3 4




typedef struct _G_fpos_t
{
  __off_t __pos;
  __mbstate_t __state;
} __fpos_t;
# 40 "/usr/include/stdio.h" 2 3 4
# 1 "/usr/include/x86_64-linux-gnu/bits/types/__fpos64_t.h" 1 3 4
# 10 "/usr/include/x86_64-linux-gnu/bits/types/__fpos64_t.h" 3 4
typedef struct _G_fpos64_t
{
  __off64_t __pos;
  __mbstate_t __state;
} __fpos64_t;
# 41 "/usr/include/stdio.h" 2 3 4
# 1 "/usr/include/x86_64-linux-gnu/bits/types/__FILE.h" 1 3 4



struct _IO_FILE;
typedef struct _IO_FILE __FILE;
# 42 "/usr/include/stdio.h" 2 3 4
# 1 "/usr/include/x86_64-linux-gnu/bits/types/FILE.h" 1 3 4



struct _IO_FILE;


typedef struct _IO_FILE FILE;
# 43 "/usr/include/stdio.h" 2 3 4
# 1 "/usr/include/x86_64-linux-gnu/bits/types/struct_FILE.h" 1 3 4
# 35 "/usr/include/x86_64-linux-gnu/bits/types/struct_FILE.h" 3 4
struct _IO_FILE;
struct _IO_marker;
struct _IO_codecvt;
struct _IO_wide_data;




typedef void _IO_lock_t;





struct _IO_FILE
{
  int _flags;


  char *_IO_read_ptr;
  char *_IO_read_end;
  char *_IO_read_base;
  char *_IO_write_base;
  char *_IO_write_ptr;
  char *_IO_write_end;
  char *_IO_buf_base;
  char *_IO_buf_end;


  char *_IO_save_base;
  char *_IO_backup_base;
  char *_IO_save_end;

  struct _IO_marker *_markers;

  struct _IO_FILE *_chain;

  int _fileno;
  int _flags2;
  __off_t _old_offset;


  unsigned short _cur_column;
  signed char _vtable_offset;
  char _shortbuf[1];

  _IO_lock_t *_lock;







  __off64_t _offset;

  struct _IO_codecvt *_codecvt;
  struct _IO_wide_data *_wide_data;
  struct _IO_FILE *_freeres_list;
  void *_freeres_buf;
  size_t __pad5;
  int _mode;

  char _unused2[15 * sizeof (int) - 4 * sizeof (void *) - sizeof (size_t)];
};
# 44 "/usr/include/stdio.h" 2 3 4
# 84 "/usr/include/stdio.h" 3 4
typedef __fpos_t fpos_t;
# 128 "/usr/include/stdio.h" 3 4
# 1 "/usr/include/x86_64-linux-gnu/bits/stdio_lim.h" 1 3 4
# 129 "/usr/include/stdio.h" 2 3 4
# 148 "/usr/include/stdio.h" 3 4
extern FILE *stdin;
extern FILE *stdout;
extern FILE *stderr;






extern int remove (const char *__filename) __attribute__ ((__nothrow__ , __leaf__));

extern int rename (const char *__old, const char *__new) __attribute__ ((__nothrow__ , __leaf__));
# 183 "/usr/include/stdio.h" 3 4
extern int fclose (FILE *__stream) __attribute__ ((__nonnull__ (1)));
# 193 "/usr/include/stdio.h" 3 4
extern FILE *tmpfile (void)
  __attribute__ ((__malloc__)) __attribute__ ((__malloc__ (fclose, 1))) __attribute__ ((__warn_unused_result__));
# 210 "/usr/include/stdio.h" 3 4
extern char *tmpnam (char[20]) __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__warn_unused_result__));
# 235 "/usr/include/stdio.h" 3 4
extern int fflush (FILE *__stream);
# 263 "/usr/include/stdio.h" 3 4
extern FILE *fopen (const char *__restrict __filename,
      const char *__restrict __modes)
  __attribute__ ((__malloc__)) __attribute__ ((__malloc__ (fclose, 1))) __attribute__ ((__warn_unused_result__));




extern FILE *freopen (const char *__restrict __filename,
        const char *__restrict __modes,
        FILE *__restrict __stream) __attribute__ ((__warn_unused_result__)) __attribute__ ((__nonnull__ (3)));
# 333 "/usr/include/stdio.h" 3 4
extern void setbuf (FILE *__restrict __stream, char *__restrict __buf) __attribute__ ((__nothrow__ , __leaf__));



extern int setvbuf (FILE *__restrict __stream, char *__restrict __buf,
      int __modes, size_t __n) __attribute__ ((__nothrow__ , __leaf__));
# 355 "/usr/include/stdio.h" 3 4
extern int fprintf (FILE *__restrict __stream,
      const char *__restrict __format, ...);




extern int printf (const char *__restrict __format, ...);

extern int sprintf (char *__restrict __s,
      const char *__restrict __format, ...) __attribute__ ((__nothrow__));





extern int vfprintf (FILE *__restrict __s, const char *__restrict __format,
       __gnuc_va_list __arg);




extern int vprintf (const char *__restrict __format, __gnuc_va_list __arg);

extern int vsprintf (char *__restrict __s, const char *__restrict __format,
       __gnuc_va_list __arg) __attribute__ ((__nothrow__));
# 420 "/usr/include/stdio.h" 3 4
extern int fscanf (FILE *__restrict __stream,
     const char *__restrict __format, ...) __attribute__ ((__warn_unused_result__));




extern int scanf (const char *__restrict __format, ...) __attribute__ ((__warn_unused_result__));

extern int sscanf (const char *__restrict __s,
     const char *__restrict __format, ...) __attribute__ ((__nothrow__ , __leaf__));





# 1 "/usr/include/x86_64-linux-gnu/bits/floatn.h" 1 3 4
# 119 "/usr/include/x86_64-linux-gnu/bits/floatn.h" 3 4
# 1 "/usr/include/x86_64-linux-gnu/bits/floatn-common.h" 1 3 4
# 24 "/usr/include/x86_64-linux-gnu/bits/floatn-common.h" 3 4
# 1 "/usr/include/x86_64-linux-gnu/bits/long-double.h" 1 3 4
# 25 "/usr/include/x86_64-linux-gnu/bits/floatn-common.h" 2 3 4
# 120 "/usr/include/x86_64-linux-gnu/bits/floatn.h" 2 3 4
# 436 "/usr/include/stdio.h" 2 3 4
# 460 "/usr/include/stdio.h" 3 4
extern int fscanf (FILE *__restrict __stream, const char *__restrict __format, ...) __asm__ ("" "__isoc99_fscanf")

                          __attribute__ ((__warn_unused_result__));
extern int scanf (const char *__restrict __format, ...) __asm__ ("" "__isoc99_scanf")
                         __attribute__ ((__warn_unused_result__));
extern int sscanf (const char *__restrict __s, const char *__restrict __format, ...) __asm__ ("" "__isoc99_sscanf") __attribute__ ((__nothrow__ , __leaf__))

                      ;
# 571 "/usr/include/stdio.h" 3 4
extern int fgetc (FILE *__stream);
extern int getc (FILE *__stream);





extern int getchar (void);
# 607 "/usr/include/stdio.h" 3 4
extern int fputc (int __c, FILE *__stream);
extern int putc (int __c, FILE *__stream);





extern int putchar (int __c);
# 650 "/usr/include/stdio.h" 3 4
extern char *fgets (char *__restrict __s, int __n, FILE *__restrict __stream)
     __attribute__ ((__warn_unused_result__)) __attribute__ ((__access__ (__write_only__, 1, 2)));
# 663 "/usr/include/stdio.h" 3 4
extern char *gets (char *__s) __attribute__ ((__warn_unused_result__)) __attribute__ ((__deprecated__));
# 713 "/usr/include/stdio.h" 3 4
extern int fputs (const char *__restrict __s, FILE *__restrict __stream);





extern int puts (const char *__s);






extern int ungetc (int __c, FILE *__stream);






extern size_t fread (void *__restrict __ptr, size_t __size,
       size_t __n, FILE *__restrict __stream) __attribute__ ((__warn_unused_result__));




extern size_t fwrite (const void *__restrict __ptr, size_t __size,
        size_t __n, FILE *__restrict __s);
# 771 "/usr/include/stdio.h" 3 4
extern int fseek (FILE *__stream, long int __off, int __whence);




extern long int ftell (FILE *__stream) __attribute__ ((__warn_unused_result__));




extern void rewind (FILE *__stream);
# 818 "/usr/include/stdio.h" 3 4
extern int fgetpos (FILE *__restrict __stream, fpos_t *__restrict __pos);




extern int fsetpos (FILE *__stream, const fpos_t *__pos);
# 844 "/usr/include/stdio.h" 3 4
extern void clearerr (FILE *__stream) __attribute__ ((__nothrow__ , __leaf__));

extern int feof (FILE *__stream) __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__warn_unused_result__));

extern int ferror (FILE *__stream) __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__warn_unused_result__));
# 862 "/usr/include/stdio.h" 3 4
extern void perror (const char *__s) __attribute__ ((__cold__));
# 943 "/usr/include/stdio.h" 3 4
extern int __uflow (FILE *);
extern int __overflow (FILE *, int);



# 1 "/usr/include/x86_64-linux-gnu/bits/stdio2-decl.h" 1 3 4
# 26 "/usr/include/x86_64-linux-gnu/bits/stdio2-decl.h" 3 4
extern int __sprintf_chk (char *__restrict __s, int __flag, size_t __slen,
     const char *__restrict __format, ...) __attribute__ ((__nothrow__ , __leaf__))
    __attribute__ ((__access__ (__write_only__, 1, 3)));
extern int __vsprintf_chk (char *__restrict __s, int __flag, size_t __slen,
      const char *__restrict __format,
      __gnuc_va_list __ap) __attribute__ ((__nothrow__ , __leaf__))
    __attribute__ ((__access__ (__write_only__, 1, 3)));
# 49 "/usr/include/x86_64-linux-gnu/bits/stdio2-decl.h" 3 4
extern int __fprintf_chk (FILE *__restrict __stream, int __flag,
     const char *__restrict __format, ...);
extern int __printf_chk (int __flag, const char *__restrict __format, ...);
extern int __vfprintf_chk (FILE *__restrict __stream, int __flag,
      const char *__restrict __format, __gnuc_va_list __ap);
extern int __vprintf_chk (int __flag, const char *__restrict __format,
     __gnuc_va_list __ap);
# 87 "/usr/include/x86_64-linux-gnu/bits/stdio2-decl.h" 3 4
extern char *__gets_warn (char *__str) __asm__ ("" "gets")
     __attribute__ ((__warn_unused_result__)) __attribute__((__warning__ ("please use fgets or getline instead, gets can't " "specify buffer size")))
                               ;

extern char *__gets_chk (char *__str, size_t) __attribute__ ((__warn_unused_result__));


extern char *__fgets_alias (char *__restrict __s, int __n, FILE *__restrict __stream) __asm__ ("" "fgets")


    __attribute__ ((__warn_unused_result__)) __attribute__ ((__access__ (__write_only__, 1, 2)));
extern char *__fgets_chk_warn (char *__restrict __s, size_t __size, int __n, FILE *__restrict __stream) __asm__ ("" "__fgets_chk")


     __attribute__ ((__warn_unused_result__)) __attribute__((__warning__ ("fgets called with bigger size than length " "of destination buffer")))
                                 ;

extern char *__fgets_chk (char *__restrict __s, size_t __size, int __n,
     FILE *__restrict __stream)
    __attribute__ ((__warn_unused_result__)) __attribute__ ((__access__ (__write_only__, 1, 3)));

extern size_t __fread_alias (void *__restrict __ptr, size_t __size, size_t __n, FILE *__restrict __stream) __asm__ ("" "fread")


            __attribute__ ((__warn_unused_result__));
extern size_t __fread_chk_warn (void *__restrict __ptr, size_t __ptrlen, size_t __size, size_t __n, FILE *__restrict __stream) __asm__ ("" "__fread_chk")




     __attribute__ ((__warn_unused_result__)) __attribute__((__warning__ ("fread called with bigger size * nmemb than length " "of destination buffer")))
                                 ;

extern size_t __fread_chk (void *__restrict __ptr, size_t __ptrlen,
      size_t __size, size_t __n,
      FILE *__restrict __stream) __attribute__ ((__warn_unused_result__));
# 949 "/usr/include/stdio.h" 2 3 4
# 960 "/usr/include/stdio.h" 3 4
# 1 "/usr/include/x86_64-linux-gnu/bits/stdio.h" 1 3 4
# 46 "/usr/include/x86_64-linux-gnu/bits/stdio.h" 3 4
extern __inline int
getchar (void)
{
  return getc (stdin);
}
# 81 "/usr/include/x86_64-linux-gnu/bits/stdio.h" 3 4
extern __inline int
putchar (int __c)
{
  return putc (__c, stdout);
}
# 961 "/usr/include/stdio.h" 2 3 4



# 1 "/usr/include/x86_64-linux-gnu/bits/stdio2.h" 1 3 4
# 27 "/usr/include/x86_64-linux-gnu/bits/stdio2.h" 3 4
extern __inline __attribute__ ((__always_inline__)) __attribute__ ((__artificial__)) int
__attribute__ ((__nothrow__ , __leaf__)) sprintf (char *__restrict __s, const char *__restrict __fmt, ...)
{
  return __builtin___sprintf_chk (__s, 2 - 1,
      __builtin_object_size (__s, 2 > 1), __fmt,
      __builtin_va_arg_pack ());
}






extern __inline __attribute__ ((__always_inline__)) __attribute__ ((__artificial__)) int
__attribute__ ((__nothrow__ , __leaf__)) vsprintf (char *__restrict __s, const char *__restrict __fmt, __gnuc_va_list __ap)

{
  return __builtin___vsprintf_chk (__s, 2 - 1,
       __builtin_object_size (__s, 2 > 1), __fmt, __ap);
}
# 76 "/usr/include/x86_64-linux-gnu/bits/stdio2.h" 3 4
extern __inline __attribute__ ((__always_inline__)) __attribute__ ((__artificial__)) int
fprintf (FILE *__restrict __stream, const char *__restrict __fmt, ...)
{
  return __fprintf_chk (__stream, 2 - 1, __fmt,
   __builtin_va_arg_pack ());
}

extern __inline __attribute__ ((__always_inline__)) __attribute__ ((__artificial__)) int
printf (const char *__restrict __fmt, ...)
{
  return __printf_chk (2 - 1, __fmt, __builtin_va_arg_pack ());
}







extern __inline __attribute__ ((__always_inline__)) __attribute__ ((__artificial__)) int
vprintf (const char *__restrict __fmt, __gnuc_va_list __ap)
{

  return __vfprintf_chk (stdout, 2 - 1, __fmt, __ap);



}

extern __inline __attribute__ ((__always_inline__)) __attribute__ ((__artificial__)) int
vfprintf (FILE *__restrict __stream,
   const char *__restrict __fmt, __gnuc_va_list __ap)
{
  return __vfprintf_chk (__stream, 2 - 1, __fmt, __ap);
}
# 185 "/usr/include/x86_64-linux-gnu/bits/stdio2.h" 3 4
extern __inline __attribute__ ((__always_inline__)) __attribute__ ((__artificial__)) __attribute__ ((__warn_unused_result__)) char *
gets (char *__str)
{
  if (__builtin_object_size (__str, 2 > 1) != (size_t) -1)
    return __gets_chk (__str, __builtin_object_size (__str, 2 > 1));
  return __gets_warn (__str);
}


extern __inline __attribute__ ((__always_inline__)) __attribute__ ((__artificial__)) __attribute__ ((__warn_unused_result__)) __attribute__ ((__access__ (__write_only__, 1, 2))) char *
fgets (char *__restrict __s, int __n, FILE *__restrict __stream)
{
  size_t sz = __builtin_object_size (__s, 2 > 1);
  if (((__builtin_constant_p (sz) && (sz) == (long unsigned int) -1) || (((__typeof (__n)) 0 < (__typeof (__n)) -1 || (__builtin_constant_p (__n) && (__n) > 0)) && __builtin_constant_p ((((long unsigned int) (__n)) <= ((sz)) / ((sizeof (char))))) && (((long unsigned int) (__n)) <= ((sz)) / ((sizeof (char)))))))
    return __fgets_alias (__s, __n, __stream);
  if ((((__typeof (__n)) 0 < (__typeof (__n)) -1 || (__builtin_constant_p (__n) && (__n) > 0)) && __builtin_constant_p ((((long unsigned int) (__n)) <= (sz) / (sizeof (char)))) && !(((long unsigned int) (__n)) <= (sz) / (sizeof (char)))))
    return __fgets_chk_warn (__s, sz, __n, __stream);
  return __fgets_chk (__s, sz, __n, __stream);
}

extern __inline __attribute__ ((__always_inline__)) __attribute__ ((__artificial__)) __attribute__ ((__warn_unused_result__)) size_t
fread (void *__restrict __ptr, size_t __size, size_t __n,
       FILE *__restrict __stream)
{
  size_t sz = __builtin_object_size (__ptr, 0);
  if (((__builtin_constant_p (sz) && (sz) == (long unsigned int) -1) || (((__typeof (__n)) 0 < (__typeof (__n)) -1 || (__builtin_constant_p (__n) && (__n) > 0)) && __builtin_constant_p ((((long unsigned int) (__n)) <= ((sz)) / ((__size)))) && (((long unsigned int) (__n)) <= ((sz)) / ((__size))))))
    return __fread_alias (__ptr, __size, __n, __stream);
  if ((((__typeof (__n)) 0 < (__typeof (__n)) -1 || (__builtin_constant_p (__n) && (__n) > 0)) && __builtin_constant_p ((((long unsigned int) (__n)) <= (sz) / (__size))) && !(((long unsigned int) (__n)) <= (sz) / (__size))))
    return __fread_chk_warn (__ptr, sz, __size, __n, __stream);
  return __fread_chk (__ptr, sz, __size, __n, __stream);
}
# 965 "/usr/include/stdio.h" 2 3 4



# 2 "src/image.c" 2
# 1 "/usr/include/time.h" 1 3 4
# 29 "/usr/include/time.h" 3 4
# 1 "/usr/lib/gcc/x86_64-linux-gnu/13/include/stddef.h" 1 3 4
# 30 "/usr/include/time.h" 2 3 4



# 1 "/usr/include/x86_64-linux-gnu/bits/time.h" 1 3 4
# 34 "/usr/include/time.h" 2 3 4



# 1 "/usr/include/x86_64-linux-gnu/bits/types/clock_t.h" 1 3 4






typedef __clock_t clock_t;
# 38 "/usr/include/time.h" 2 3 4
# 1 "/usr/include/x86_64-linux-gnu/bits/types/time_t.h" 1 3 4
# 10 "/usr/include/x86_64-linux-gnu/bits/types/time_t.h" 3 4
typedef __time_t time_t;
# 39 "/usr/include/time.h" 2 3 4
# 1 "/usr/include/x86_64-linux-gnu/bits/types/struct_tm.h" 1 3 4






struct tm
{
  int tm_sec;
  int tm_min;
  int tm_hour;
  int tm_mday;
  int tm_mon;
  int tm_year;
  int tm_wday;
  int tm_yday;
  int tm_isdst;





  long int __tm_gmtoff;
  const char *__tm_zone;

};
# 40 "/usr/include/time.h" 2 3 4
# 68 "/usr/include/time.h" 3 4




extern clock_t clock (void) __attribute__ ((__nothrow__ , __leaf__));



extern time_t time (time_t *__timer) __attribute__ ((__nothrow__ , __leaf__));


extern double difftime (time_t __time1, time_t __time0)
     __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__const__));


extern time_t mktime (struct tm *__tp) __attribute__ ((__nothrow__ , __leaf__));
# 100 "/usr/include/time.h" 3 4
extern size_t strftime (char *__restrict __s, size_t __maxsize,
   const char *__restrict __format,
   const struct tm *__restrict __tp)
   __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__nonnull__ (1, 3, 4)));
# 133 "/usr/include/time.h" 3 4
extern struct tm *gmtime (const time_t *__timer) __attribute__ ((__nothrow__ , __leaf__));



extern struct tm *localtime (const time_t *__timer) __attribute__ ((__nothrow__ , __leaf__));
# 180 "/usr/include/time.h" 3 4
extern char *asctime (const struct tm *__tp) __attribute__ ((__nothrow__ , __leaf__));



extern char *ctime (const time_t *__timer) __attribute__ ((__nothrow__ , __leaf__));
# 218 "/usr/include/time.h" 3 4
extern char *__tzname[2];
extern int __daylight;
extern long int __timezone;
# 453 "/usr/include/time.h" 3 4

# 3 "src/image.c" 2

# 1 "include/image.h" 1



# 1 "include/objet.h" 1



# 1 "/usr/include/stdlib.h" 1 3 4
# 26 "/usr/include/stdlib.h" 3 4
# 1 "/usr/include/x86_64-linux-gnu/bits/libc-header-start.h" 1 3 4
# 27 "/usr/include/stdlib.h" 2 3 4





# 1 "/usr/lib/gcc/x86_64-linux-gnu/13/include/stddef.h" 1 3 4
# 329 "/usr/lib/gcc/x86_64-linux-gnu/13/include/stddef.h" 3 4
typedef int wchar_t;
# 33 "/usr/include/stdlib.h" 2 3 4


# 59 "/usr/include/stdlib.h" 3 4
typedef struct
  {
    int quot;
    int rem;
  } div_t;



typedef struct
  {
    long int quot;
    long int rem;
  } ldiv_t;
# 98 "/usr/include/stdlib.h" 3 4
extern size_t __ctype_get_mb_cur_max (void) __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__warn_unused_result__));



extern double atof (const char *__nptr)
     __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__pure__)) __attribute__ ((__nonnull__ (1))) __attribute__ ((__warn_unused_result__));

extern int atoi (const char *__nptr)
     __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__pure__)) __attribute__ ((__nonnull__ (1))) __attribute__ ((__warn_unused_result__));

extern long int atol (const char *__nptr)
     __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__pure__)) __attribute__ ((__nonnull__ (1))) __attribute__ ((__warn_unused_result__));
# 118 "/usr/include/stdlib.h" 3 4
extern double strtod (const char *__restrict __nptr,
        char **__restrict __endptr)
     __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__nonnull__ (1)));
# 177 "/usr/include/stdlib.h" 3 4
extern long int strtol (const char *__restrict __nptr,
   char **__restrict __endptr, int __base)
     __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__nonnull__ (1)));

extern unsigned long int strtoul (const char *__restrict __nptr,
      char **__restrict __endptr, int __base)
     __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__nonnull__ (1)));
# 480 "/usr/include/stdlib.h" 3 4
extern __inline int
__attribute__ ((__nothrow__ , __leaf__)) atoi (const char *__nptr)
{
  return (int) strtol (__nptr, (char **) ((void *)0), 10);
}
extern __inline long int
__attribute__ ((__nothrow__ , __leaf__)) atol (const char *__nptr)
{
  return strtol (__nptr, (char **) ((void *)0), 10);
}
# 573 "/usr/include/stdlib.h" 3 4
extern int rand (void) __attribute__ ((__nothrow__ , __leaf__));

extern void srand (unsigned int __seed) __attribute__ ((__nothrow__ , __leaf__));
# 672 "/usr/include/stdlib.h" 3 4
extern void *malloc (size_t __size) __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__malloc__))
     __attribute__ ((__alloc_size__ (1))) __attribute__ ((__warn_unused_result__));

extern void *calloc (size_t __nmemb, size_t __size)
     __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__malloc__)) __attribute__ ((__alloc_size__ (1, 2))) __attribute__ ((__warn_unused_result__));






extern void *realloc (void *__ptr, size_t __size)
     __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__warn_unused_result__)) __attribute__ ((__alloc_size__ (2)));


extern void free (void *__ptr) __attribute__ ((__nothrow__ , __leaf__));
# 730 "/usr/include/stdlib.h" 3 4
extern void abort (void) __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__noreturn__));



extern int atexit (void (*__func) (void)) __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__nonnull__ (1)));
# 756 "/usr/include/stdlib.h" 3 4
extern void exit (int __status) __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__noreturn__));
# 773 "/usr/include/stdlib.h" 3 4
extern char *getenv (const char *__name) __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__nonnull__ (1))) __attribute__ ((__warn_unused_result__));
# 923 "/usr/include/stdlib.h" 3 4
extern int system (const char *__command) __attribute__ ((__warn_unused_result__));
# 948 "/usr/include/stdlib.h" 3 4
typedef int (*__compar_fn_t) (const void *, const void *);
# 960 "/usr/include/stdlib.h" 3 4
extern void *bsearch (const void *__key, const void *__base,
        size_t __nmemb, size_t __size, __compar_fn_t __compar)
     __attribute__ ((__nonnull__ (1, 2, 5))) __attribute__ ((__warn_unused_result__));


# 1 "/usr/include/x86_64-linux-gnu/bits/stdlib-bsearch.h" 1 3 4
# 19 "/usr/include/x86_64-linux-gnu/bits/stdlib-bsearch.h" 3 4
extern __inline void *
bsearch (const void *__key, const void *__base, size_t __nmemb, size_t __size,
  __compar_fn_t __compar)
{
  size_t __l, __u, __idx;
  const void *__p;
  int __comparison;

  __l = 0;
  __u = __nmemb;
  while (__l < __u)
    {
      __idx = (__l + __u) / 2;
      __p = (const void *) (((const char *) __base) + (__idx * __size));
      __comparison = (*__compar) (__key, __p);
      if (__comparison < 0)
 __u = __idx;
      else if (__comparison > 0)
 __l = __idx + 1;
      else
 {

#pragma GCC diagnostic push
#pragma GCC diagnostic ignored "-Wcast-qual"

   return (void *) __p;

#pragma GCC diagnostic pop

 }
    }

  return ((void *)0);
}
# 966 "/usr/include/stdlib.h" 2 3 4




extern void qsort (void *__base, size_t __nmemb, size_t __size,
     __compar_fn_t __compar) __attribute__ ((__nonnull__ (1, 4)));
# 980 "/usr/include/stdlib.h" 3 4
extern int abs (int __x) __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__const__)) __attribute__ ((__warn_unused_result__));
extern long int labs (long int __x) __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__const__)) __attribute__ ((__warn_unused_result__));
# 992 "/usr/include/stdlib.h" 3 4
extern div_t div (int __numer, int __denom)
     __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__const__)) __attribute__ ((__warn_unused_result__));
extern ldiv_t ldiv (long int __numer, long int __denom)
     __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__const__)) __attribute__ ((__warn_unused_result__));
# 1062 "/usr/include/stdlib.h" 3 4
extern int mblen (const char *__s, size_t __n) __attribute__ ((__nothrow__ , __leaf__));


extern int mbtowc (wchar_t *__restrict __pwc,
     const char *__restrict __s, size_t __n) __attribute__ ((__nothrow__ , __leaf__));


extern int wctomb (char *__s, wchar_t __wchar) __attribute__ ((__nothrow__ , __leaf__));



extern size_t mbstowcs (wchar_t *__restrict __pwcs,
   const char *__restrict __s, size_t __n) __attribute__ ((__nothrow__ , __leaf__))
    __attribute__ ((__access__ (__read_only__, 2)));

extern size_t wcstombs (char *__restrict __s,
   const wchar_t *__restrict __pwcs, size_t __n)
     __attribute__ ((__nothrow__ , __leaf__))
  __attribute__ ((__access__ (__write_only__, 1, 3)))
  __attribute__ ((__access__ (__read_only__, 2)));
# 1155 "/usr/include/stdlib.h" 3 4
# 1 "/usr/include/x86_64-linux-gnu/bits/stdlib-float.h" 1 3 4
# 24 "/usr/include/x86_64-linux-gnu/bits/stdlib-float.h" 3 4
extern __inline double
__attribute__ ((__nothrow__ , __leaf__)) atof (const char *__nptr)
{
  return strtod (__nptr, (char **) ((void *)0));
}
# 1156 "/usr/include/stdlib.h" 2 3 4



# 1 "/usr/include/x86_64-linux-gnu/bits/stdlib.h" 1 3 4
# 23 "/usr/include/x86_64-linux-gnu/bits/stdlib.h" 3 4
extern char *__realpath_chk (const char *__restrict __name,
        char *__restrict __resolved,
        size_t __resolvedlen) __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__warn_unused_result__));
extern char *__realpath_alias (const char *__restrict __name, char *__restrict __resolved) __asm__ ("" "realpath") __attribute__ ((__nothrow__ , __leaf__))

                                                 __attribute__ ((__warn_unused_result__));
extern char *__realpath_chk_warn (const char *__restrict __name, char *__restrict __resolved, size_t __resolvedlen) __asm__ ("" "__realpath_chk") __attribute__ ((__nothrow__ , __leaf__))


                                                __attribute__ ((__warn_unused_result__))
     __attribute__((__warning__ ("second argument of realpath must be either NULL or at " "least PATH_MAX bytes long buffer")))
                                      ;

extern __inline __attribute__ ((__always_inline__)) __attribute__ ((__artificial__)) __attribute__ ((__warn_unused_result__)) char *
__attribute__ ((__nothrow__ , __leaf__)) realpath (const char *__restrict __name, char *__restrict __resolved)
{
  size_t sz = __builtin_object_size (__resolved, 2 > 1);

  if (sz == (size_t) -1)
    return __realpath_alias (__name, __resolved);





  return __realpath_chk (__name, __resolved, sz);
}


extern int __ptsname_r_chk (int __fd, char *__buf, size_t __buflen,
       size_t __nreal) __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__nonnull__ (2)))
    __attribute__ ((__access__ (__write_only__, 2, 3)));
extern int __ptsname_r_alias (int __fd, char *__buf, size_t __buflen) __asm__ ("" "ptsname_r") __attribute__ ((__nothrow__ , __leaf__))

     __attribute__ ((__nonnull__ (2))) __attribute__ ((__access__ (__write_only__, 2, 3)));
extern int __ptsname_r_chk_warn (int __fd, char *__buf, size_t __buflen, size_t __nreal) __asm__ ("" "__ptsname_r_chk") __attribute__ ((__nothrow__ , __leaf__))


     __attribute__ ((__nonnull__ (2))) __attribute__((__warning__ ("ptsname_r called with buflen bigger than " "size of buf")))
                   ;

extern __inline __attribute__ ((__always_inline__)) __attribute__ ((__artificial__)) int
__attribute__ ((__nothrow__ , __leaf__)) ptsname_r (int __fd, char *__buf, size_t __buflen)
{
  return (((__builtin_constant_p (__builtin_object_size (__buf, 2 > 1)) && (__builtin_object_size (__buf, 2 > 1)) == (long unsigned int) -1) || (((__typeof (__buflen)) 0 < (__typeof (__buflen)) -1 || (__builtin_constant_p (__buflen) && (__buflen) > 0)) && __builtin_constant_p ((((long unsigned int) (__buflen)) <= ((__builtin_object_size (__buf, 2 > 1))) / ((sizeof (char))))) && (((long unsigned int) (__buflen)) <= ((__builtin_object_size (__buf, 2 > 1))) / ((sizeof (char)))))) ? __ptsname_r_alias (__fd, __buf, __buflen) : ((((__typeof (__buflen)) 0 < (__typeof (__buflen)) -1 || (__builtin_constant_p (__buflen) && (__buflen) > 0)) && __builtin_constant_p ((((long unsigned int) (__buflen)) <= (__builtin_object_size (__buf, 2 > 1)) / (sizeof (char)))) && !(((long unsigned int) (__buflen)) <= (__builtin_object_size (__buf, 2 > 1)) / (sizeof (char)))) ? __ptsname_r_chk_warn (__fd, __buf, __buflen, __builtin_object_size (__buf, 2 > 1)) : __ptsname_r_chk (__fd, __buf, __buflen, __builtin_object_size (__buf, 2 > 1))))

                           ;
}


extern int __wctomb_chk (char *__s, wchar_t __wchar, size_t __buflen)
  __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__warn_unused_result__));
extern int __wctomb_alias (char *__s, wchar_t __wchar) __asm__ ("" "wctomb") __attribute__ ((__nothrow__ , __leaf__))
              __attribute__ ((__warn_unused_result__));

extern __inline __attribute__ ((__always_inline__)) __attribute__ ((__artificial__)) __attribute__ ((__warn_unused_result__)) int
__attribute__ ((__nothrow__ , __leaf__)) wctomb (char *__s, wchar_t __wchar)
{







  if (__builtin_object_size (__s, 2 > 1) != (size_t) -1
      && 16 > __builtin_object_size (__s, 2 > 1))
    return __wctomb_chk (__s, __wchar, __builtin_object_size (__s, 2 > 1));
  return __wctomb_alias (__s, __wchar);
}


extern size_t __mbstowcs_chk (wchar_t *__restrict __dst,
         const char *__restrict __src,
         size_t __len, size_t __dstlen) __attribute__ ((__nothrow__ , __leaf__))
    __attribute__ ((__access__ (__write_only__, 1, 3))) __attribute__ ((__access__ (__read_only__, 2)));
extern size_t __mbstowcs_nulldst (wchar_t *__restrict __dst, const char *__restrict __src, size_t __len) __asm__ ("" "mbstowcs") __attribute__ ((__nothrow__ , __leaf__))



    __attribute__ ((__access__ (__read_only__, 2)));
extern size_t __mbstowcs_alias (wchar_t *__restrict __dst, const char *__restrict __src, size_t __len) __asm__ ("" "mbstowcs") __attribute__ ((__nothrow__ , __leaf__))



    __attribute__ ((__access__ (__write_only__, 1, 3))) __attribute__ ((__access__ (__read_only__, 2)));
extern size_t __mbstowcs_chk_warn (wchar_t *__restrict __dst, const char *__restrict __src, size_t __len, size_t __dstlen) __asm__ ("" "__mbstowcs_chk") __attribute__ ((__nothrow__ , __leaf__))



     __attribute__((__warning__ ("mbstowcs called with dst buffer smaller than len " "* sizeof (wchar_t)")))
                        ;

extern __inline __attribute__ ((__always_inline__)) __attribute__ ((__artificial__)) size_t
__attribute__ ((__nothrow__ , __leaf__)) mbstowcs (wchar_t *__restrict __dst, const char *__restrict __src, size_t __len)

{
  if (__builtin_constant_p (__dst == ((void *)0)) && __dst == ((void *)0))
    return __mbstowcs_nulldst (__dst, __src, __len);
  else
    return (((__builtin_constant_p (__builtin_object_size (__dst, 2 > 1)) && (__builtin_object_size (__dst, 2 > 1)) == (long unsigned int) -1) || (((__typeof (__len)) 0 < (__typeof (__len)) -1 || (__builtin_constant_p (__len) && (__len) > 0)) && __builtin_constant_p ((((long unsigned int) (__len)) <= ((__builtin_object_size (__dst, 2 > 1))) / ((sizeof (wchar_t))))) && (((long unsigned int) (__len)) <= ((__builtin_object_size (__dst, 2 > 1))) / ((sizeof (wchar_t)))))) ? __mbstowcs_alias (__dst, __src, __len) : ((((__typeof (__len)) 0 < (__typeof (__len)) -1 || (__builtin_constant_p (__len) && (__len) > 0)) && __builtin_constant_p ((((long unsigned int) (__len)) <= (__builtin_object_size (__dst, 2 > 1)) / (sizeof (wchar_t)))) && !(((long unsigned int) (__len)) <= (__builtin_object_size (__dst, 2 > 1)) / (sizeof (wchar_t)))) ? __mbstowcs_chk_warn (__dst, __src, __len, (__builtin_object_size (__dst, 2 > 1)) / (sizeof (wchar_t))) : __mbstowcs_chk (__dst, __src, __len, (__builtin_object_size (__dst, 2 > 1)) / (sizeof (wchar_t)))))
                                                      ;
}

extern size_t __wcstombs_chk (char *__restrict __dst,
         const wchar_t *__restrict __src,
         size_t __len, size_t __dstlen) __attribute__ ((__nothrow__ , __leaf__))
  __attribute__ ((__access__ (__write_only__, 1, 3))) __attribute__ ((__access__ (__read_only__, 2)));
extern size_t __wcstombs_alias (char *__restrict __dst, const wchar_t *__restrict __src, size_t __len) __asm__ ("" "wcstombs") __attribute__ ((__nothrow__ , __leaf__))



  __attribute__ ((__access__ (__write_only__, 1, 3))) __attribute__ ((__access__ (__read_only__, 2)));
extern size_t __wcstombs_chk_warn (char *__restrict __dst, const wchar_t *__restrict __src, size_t __len, size_t __dstlen) __asm__ ("" "__wcstombs_chk") __attribute__ ((__nothrow__ , __leaf__))



     __attribute__((__warning__ ("wcstombs called with dst buffer smaller than len")));

extern __inline __attribute__ ((__always_inline__)) __attribute__ ((__artificial__)) size_t
__attribute__ ((__nothrow__ , __leaf__)) wcstombs (char *__restrict __dst, const wchar_t *__restrict __src, size_t __len)

{
  return (((__builtin_constant_p (__builtin_object_size (__dst, 2 > 1)) && (__builtin_object_size (__dst, 2 > 1)) == (long unsigned int) -1) || (((__typeof (__len)) 0 < (__typeof (__len)) -1 || (__builtin_constant_p (__len) && (__len) > 0)) && __builtin_constant_p ((((long unsigned int) (__len)) <= ((__builtin_object_size (__dst, 2 > 1))) / ((sizeof (char))))) && (((long unsigned int) (__len)) <= ((__builtin_object_size (__dst, 2 > 1))) / ((sizeof (char)))))) ? __wcstombs_alias (__dst, __src, __len) : ((((__typeof (__len)) 0 < (__typeof (__len)) -1 || (__builtin_constant_p (__len) && (__len) > 0)) && __builtin_constant_p ((((long unsigned int) (__len)) <= (__builtin_object_size (__dst, 2 > 1)) / (sizeof (char)))) && !(((long unsigned int) (__len)) <= (__builtin_object_size (__dst, 2 > 1)) / (sizeof (char)))) ? __wcstombs_chk_warn (__dst, __src, __len, __builtin_object_size (__dst, 2 > 1)) : __wcstombs_chk (__dst, __src, __len, __builtin_object_size (__dst, 2 > 1))))

                         ;
}
# 1160 "/usr/include/stdlib.h" 2 3 4








# 5 "include/objet.h" 2
# 1 "/usr/lib/gcc/x86_64-linux-gnu/13/include/stddef.h" 1 3 4
# 145 "/usr/lib/gcc/x86_64-linux-gnu/13/include/stddef.h" 3 4
typedef long int ptrdiff_t;
# 6 "include/objet.h" 2
# 1 "/usr/include/assert.h" 1 3 4
# 66 "/usr/include/assert.h" 3 4



extern void __assert_fail (const char *__assertion, const char *__file,
      unsigned int __line, const char *__function)
     __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__noreturn__));


extern void __assert_perror_fail (int __errnum, const char *__file,
      unsigned int __line, const char *__function)
     __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__noreturn__));




extern void __assert (const char *__assertion, const char *__file, int __line)
     __attribute__ ((__nothrow__ , __leaf__)) __attribute__ ((__noreturn__));



# 7 "include/objet.h" 2
# 1 "include/exit_if.h" 1
# 8 "include/objet.h" 2
# 5 "include/image.h" 2
# 1 "include/classe.h" 1
# 6 "include/image.h" 2

# 1 "include/point.h" 1




# 1 "include/move_type.h" 1


# 1 "include/type_obj.h" 1



# 1 "/usr/lib/gcc/x86_64-linux-gnu/13/include/limits.h" 1 3 4
# 34 "/usr/lib/gcc/x86_64-linux-gnu/13/include/limits.h" 3 4
# 1 "/usr/lib/gcc/x86_64-linux-gnu/13/include/syslimits.h" 1 3 4






# 1 "/usr/lib/gcc/x86_64-linux-gnu/13/include/limits.h" 1 3 4
# 205 "/usr/lib/gcc/x86_64-linux-gnu/13/include/limits.h" 3 4
# 1 "/usr/include/limits.h" 1 3 4
# 26 "/usr/include/limits.h" 3 4
# 1 "/usr/include/x86_64-linux-gnu/bits/libc-header-start.h" 1 3 4
# 27 "/usr/include/limits.h" 2 3 4
# 206 "/usr/lib/gcc/x86_64-linux-gnu/13/include/limits.h" 2 3 4
# 8 "/usr/lib/gcc/x86_64-linux-gnu/13/include/syslimits.h" 2 3 4
# 35 "/usr/lib/gcc/x86_64-linux-gnu/13/include/limits.h" 2 3 4
# 5 "include/type_obj.h" 2



# 7 "include/type_obj.h"
typedef enum{faux,vrai} booleen;
typedef int angle;
# 4 "include/move_type.h" 2

typedef int move_type;
# 32 "include/move_type.h"
extern long move_type_compute_step_clock(move_type,move_type);
extern int move_type_compute_dist_sigma_1(move_type,move_type);
# 6 "include/point.h" 2


struct point
{
  int coordx;
  int coordy;
};

typedef struct point *point;

typedef struct point Point;
# 8 "include/image.h" 2



typedef double (*PFdist)(int*,int*,booleen);
typedef unsigned char Comp_rgb;
typedef struct image *image;

extern image FAIRE_image();
extern void DEFAIRE_image(image);


extern int image_charger (image,char*);
extern int image_sauvegarder(image,char*);
extern int image_to_stream (image,FILE*);

extern int* image_lire_pixel (image);
extern void image_ecrire_pixel(image,int*);

extern void image_read_pixel(image,int,int,unsigned char*);
extern void image_write_pixel(image,int,int, unsigned char*);

extern booleen image_pixel_suivant(image);
extern void image_debut (image);
extern booleen image_move_to (image,point);
extern booleen image_pixel_dessus (image);
extern booleen image_pixel_dessous(image);
extern booleen image_pixel_gauche (image);
extern booleen image_pixel_droite (image);

extern void image_set_distance(image,PFdist);

extern void image_initialize(image,int,int,int);
extern double image_distance(image,point,move_type);

extern int image_give_dim (image);
extern int image_give_hauteur(image);
extern int image_give_largeur(image);
# 5 "src/image.c" 2
# 1 "include/point.h" 1
# 6 "src/image.c" 2
# 1 "include/type_obj.h" 1
# 7 "src/image.c" 2
# 24 "src/image.c"
typedef unsigned char Comp_rgb;
typedef int (*PFsauvegarde)(image,FILE*);


static booleen private_valide(image,int,int);
static void private_recopie(Comp_rgb*,int*);
static double private_default_distance_dim3(int*,int*,booleen);
static double private_default_distance_dim1(int*,int*,booleen);
static int image_dim_1_to_stream_priv(image,FILE*);
static int image_dim_3_to_stream_priv(image,FILE*);
static void lire_commentaires_priv(FILE*);
static void read_ascii_priv(image,FILE*);
static PFdist default_distance[] =
{
  
# 38 "src/image.c" 3 4
 ((void *)0)
# 38 "src/image.c"
     ,
  private_default_distance_dim1,
  
# 40 "src/image.c" 3 4
 ((void *)0)
# 40 "src/image.c"
     ,
  private_default_distance_dim3,
};

struct image
{

  Comp_rgb * debut;
  Comp_rgb * courant;
  int hauteur;
  int largeur;
  int longueur;
  long taille;
  int dim;
  PFdist distance;
};

image FAIRE_image()
{

  image self = malloc(sizeof(struct image));
# 60 "src/image.c" 3 4
 ((
# 60 "src/image.c"
 self
# 60 "src/image.c" 3 4
 ) ? (void) (0) : __assert_fail (
# 60 "src/image.c"
 "self"
# 60 "src/image.c" 3 4
 , "src/image.c", 60, __extension__ __PRETTY_FUNCTION__))
# 60 "src/image.c"
 ;;

  return self;
}

void DEFAIRE_image(image self)
{
  free((self->debut));
}



void image_initialize(image self,int dim,int largeur,int hauteur)
{
  
# 74 "src/image.c" 3 4
 ((
# 74 "src/image.c"
 dim >0 && dim <=3
# 74 "src/image.c" 3 4
 ) ? (void) (0) : __assert_fail (
# 74 "src/image.c"
 "dim >0 && dim <=3"
# 74 "src/image.c" 3 4
 , "src/image.c", 74, __extension__ __PRETTY_FUNCTION__))
# 74 "src/image.c"
                          ;

  (self->dim) = dim;
  (self->hauteur) = hauteur;
  (self->largeur) = largeur;
  (self->longueur) = (self->dim)*(self->largeur);
  (self->taille) = (self->longueur)*(self->hauteur);
  (self->debut) = (Comp_rgb*)calloc((self->taille),sizeof(Comp_rgb));
  (self->courant) = (self->debut);

  if( ((self->dim) <=3) && ((self->dim) >=0) )
    (self->distance) = default_distance[(self->dim)];
}






int image_charger(image self,char* nom)
{
  FILE * id;
  char MagicNumber[3];
  int valeur_max;
  size_t taille_comp_RGB = sizeof(Comp_rgb);
  char retour_chariot;



  id = fopen(nom,"r");

  if(id == 
# 105 "src/image.c" 3 4
          ((void *)0)
# 105 "src/image.c"
              )
    return (-1);


  fscanf(id,"%3s",MagicNumber);

  if((MagicNumber[0] != 'P') || (
     (MagicNumber[1] != '6')&&
     (MagicNumber[1] != '5')&&
     (MagicNumber[1] != '2')
     )
     )
    {
      fprintf(
# 118 "src/image.c" 3 4
             stderr
# 118 "src/image.c"
                   ,"le fichier semble ne pas etre un fichier pnm\n");
      fclose(id);
      return(-2);
    }
  if(MagicNumber[1] == '6')
    (self->dim) = 3;
  else
    (self->dim) =1;

  lire_commentaires_priv(id);


  fscanf(id,"%d",&(self->largeur));
  fscanf(id,"%d",&(self->hauteur));
  (self->longueur) = (self->dim)*(self->largeur);
  (self->taille) = (self->longueur)*(self->hauteur);

  fscanf(id,"%d%c",&valeur_max,&retour_chariot);

  if((self->largeur) <=0 || (self->hauteur) <= 0 || valeur_max <=1)
    {
      fprintf(
# 139 "src/image.c" 3 4
             stderr
# 139 "src/image.c"
                   ," Image non lue :  Contient des valeurs aberrantes\n");
      return(-3);
    }
  (self->debut) = (Comp_rgb *)malloc(taille_comp_RGB*(self->taille));
  if(MagicNumber[1]=='2')
    read_ascii_priv(self,id);
  else
    fread((self->debut),taille_comp_RGB,(self->taille),id);
  fclose(id);

  if( ((self->dim) <=3) && ((self->dim) >=0) )
    (self->distance) = default_distance[(self->dim)];

  return(0);
}
int image_sauvegarder(image self,char* nom)
{
  FILE *id;
  static PFsauvegarde sauvegarde[] =
    {
      
# 159 "src/image.c" 3 4
     ((void *)0)
# 159 "src/image.c"
         ,
      image_dim_1_to_stream_priv,
      
# 161 "src/image.c" 3 4
     ((void *)0)
# 161 "src/image.c"
         ,
      image_dim_3_to_stream_priv,
    };

  if( ((self->dim) != 1)&&((self->dim) != 3) )
    {
      fprintf(
# 167 "src/image.c" 3 4
             stderr
# 167 "src/image.c"
                   ,"Image Non sauvegardable\n");
      return -1;
    }

  id = fopen(nom,"w");

  if(id == 
# 173 "src/image.c" 3 4
          ((void *)0)
# 173 "src/image.c"
              )
    return -1;

  return sauvegarde[(self->dim)](self,id);
}
int image_to_stream(image self,FILE* id)
{
  static PFsauvegarde sauvegarde[] =
    {
      
# 182 "src/image.c" 3 4
     ((void *)0)
# 182 "src/image.c"
         ,
      image_dim_1_to_stream_priv,
      
# 184 "src/image.c" 3 4
     ((void *)0)
# 184 "src/image.c"
         ,
      image_dim_3_to_stream_priv,
    };

  if( ((self->dim) != 1)&&((self->dim) != 3) )
    {
      fprintf(
# 190 "src/image.c" 3 4
             stderr
# 190 "src/image.c"
                   ,"Image Non sauvegardable\n");
      return -1;
    }

  return sauvegarde[(self->dim)](self,id);
}
int* image_lire_pixel(image self)
{
  static int tab[3];
  int i;

  for(i=0;i<(self->dim);i++)
    tab[i] = (int)(*((self->courant)+i));

  return tab;
}
int image_get_comp(image self,point p,int comp)
{
  int i = ((*p).coordy);
  int j = ((*p).coordx);


  
# 212 "src/image.c" 3 4
 ((
# 212 "src/image.c"
 private_valide(self,i,j)
# 212 "src/image.c" 3 4
 ) ? (void) (0) : __assert_fail (
# 212 "src/image.c"
 "private_valide(self,i,j)"
# 212 "src/image.c" 3 4
 , "src/image.c", 212, __extension__ __PRETTY_FUNCTION__))
# 212 "src/image.c"
                                 ;
  
# 213 "src/image.c" 3 4
 ((
# 213 "src/image.c"
 comp>=0&& comp<3
# 213 "src/image.c" 3 4
 ) ? (void) (0) : __assert_fail (
# 213 "src/image.c"
 "comp>=0&& comp<3"
# 213 "src/image.c" 3 4
 , "src/image.c", 213, __extension__ __PRETTY_FUNCTION__))
# 213 "src/image.c"
                         ;

  return *((self->debut)+( (self->dim)*( (i)*(self->largeur)+(j) ) )+comp);
}
void image_ecrire_pixel(image self,int* tab)
{
  int i;

  for(i=0;i<(self->dim);i++)
    *((self->courant)+i) = (Comp_rgb)tab[i];
}

booleen image_pixel_suivant(image self)
{
  Comp_rgb *pixel = (self->courant)+(self->dim);


  if( (pixel - (self->debut)) >= (self->taille) )
    return faux;

  (self->courant) = pixel;
  return vrai;
}
void image_debut(image self)
{
  (self->courant) = (self->debut);
}
booleen image_move_to(image self,point p)
{
  int i = ((*p).coordy);
  int j = ((*p).coordx);


  if(!private_valide(self,i,j))
    return faux;

  (self->courant) = (self->debut) + ( (self->dim)*( (i)*(self->largeur)+(j) ) );

  return vrai;
}
void image_read_pixel(image self,int i,int j,Comp_rgb* buf)
{
  Comp_rgb* ptr;

  
# 257 "src/image.c" 3 4
 ((
# 257 "src/image.c"
 self
# 257 "src/image.c" 3 4
 ) ? (void) (0) : __assert_fail (
# 257 "src/image.c"
 "self"
# 257 "src/image.c" 3 4
 , "src/image.c", 257, __extension__ __PRETTY_FUNCTION__))
# 257 "src/image.c"
             ;
  
# 258 "src/image.c" 3 4
 ((
# 258 "src/image.c"
 buf
# 258 "src/image.c" 3 4
 ) ? (void) (0) : __assert_fail (
# 258 "src/image.c"
 "buf"
# 258 "src/image.c" 3 4
 , "src/image.c", 258, __extension__ __PRETTY_FUNCTION__))
# 258 "src/image.c"
            ;
  
# 259 "src/image.c" 3 4
 ((
# 259 "src/image.c"
 private_valide(self,i,j)
# 259 "src/image.c" 3 4
 ) ? (void) (0) : __assert_fail (
# 259 "src/image.c"
 "private_valide(self,i,j)"
# 259 "src/image.c" 3 4
 , "src/image.c", 259, __extension__ __PRETTY_FUNCTION__))
# 259 "src/image.c"
                                 ;


 ptr = (self->debut) + ( (self->dim)*( (i)*(self->largeur)+(j) ) );
 for(i=0;i<(self->dim);i++)
   buf[i]=ptr[i];
}
void image_write_pixel(image self,int i,int j,Comp_rgb* buf)
{
  Comp_rgb* ptr;

  
# 270 "src/image.c" 3 4
 ((
# 270 "src/image.c"
 self
# 270 "src/image.c" 3 4
 ) ? (void) (0) : __assert_fail (
# 270 "src/image.c"
 "self"
# 270 "src/image.c" 3 4
 , "src/image.c", 270, __extension__ __PRETTY_FUNCTION__))
# 270 "src/image.c"
             ;
  
# 271 "src/image.c" 3 4
 ((
# 271 "src/image.c"
 buf
# 271 "src/image.c" 3 4
 ) ? (void) (0) : __assert_fail (
# 271 "src/image.c"
 "buf"
# 271 "src/image.c" 3 4
 , "src/image.c", 271, __extension__ __PRETTY_FUNCTION__))
# 271 "src/image.c"
            ;
  
# 272 "src/image.c" 3 4
 ((
# 272 "src/image.c"
 private_valide(self,i,j)
# 272 "src/image.c" 3 4
 ) ? (void) (0) : __assert_fail (
# 272 "src/image.c"
 "private_valide(self,i,j)"
# 272 "src/image.c" 3 4
 , "src/image.c", 272, __extension__ __PRETTY_FUNCTION__))
# 272 "src/image.c"
                                 ;


 ptr = (self->debut) + ( (self->dim)*( (i)*(self->largeur)+(j) ) );
 for(i=0;i<(self->dim);i++)
   ptr[i]=buf[i];
}

booleen image_pixel_dessus(image self)
{
  Comp_rgb *pixel = (self->courant)-(self->longueur);

  if(pixel -(self->debut) < 0)
    return faux;

  (self->courant) = pixel;
  return vrai;
}


booleen image_pixel_dessous(image self)
{
  Comp_rgb *pixel = (self->courant)+(self->longueur);

  if(pixel -(self->debut) >= (self->taille))
    return faux;

  (self->courant) = pixel;
  return vrai;
}

booleen image_pixel_gauche(image self)
{
  int nb_pixel = (int)((self->courant) - (self->debut));

  if( nb_pixel%(self->longueur) == 0 )
    return faux;

  (self->courant) -= (self->dim);
  return vrai;
}

booleen image_pixel_droite(image self)
{
  int nb_pixel = (int) ((self->courant) - (self->debut));

  if( (nb_pixel+(self->dim))%(self->longueur) == 0 )
    return faux;

  (self->courant) += (self->dim);
  return vrai;
}





double image_distance(image self,point p,move_type move)
{
  int pixel_1[3],pixel_2[3];
  Comp_rgb *pix1,*pix2;
  booleen valide1,valide2;
  int x = ((*p).coordx);
  int y = ((*p).coordy);



  switch(move)
    {
    case 0:
      pix1 = (self->debut) + ( (self->dim)*( (y)*(self->largeur)+(x+1) ) );
      pix2 = pix1 + (self->longueur);
      valide1 = private_valide(self,y,x+1);
      valide2 = private_valide(self,y+1,x+1);
      break;

    case 1:
      pix1 = (self->debut) + ( (self->dim)*( (y)*(self->largeur)+(x) ) );
      pix2 = pix1+(self->dim);
      valide1 = private_valide(self,y,x);
      valide2 = private_valide(self,y,x+1);
      break;

    case 2:
      pix1 = (self->debut) + ( (self->dim)*( (y)*(self->largeur)+(x) ) );
      pix2 = pix1+ (self->longueur);
      valide1 = private_valide(self,y,x);
      valide2 = private_valide(self,y+1,x);
      break;

    case 3:
      pix1 = (self->debut) + ( (self->dim)*( (y+1)*(self->largeur)+(x) ) );
      pix2 = pix1+(self->dim);
      valide1 = private_valide(self,y+1,x);
      valide2 = private_valide(self,y+1,x+1);
      break;

    default:
      fprintf(
# 370 "src/image.c" 3 4
             stderr
# 370 "src/image.c"
                   ,"distance, image.c : move incorect");
      break;
    }






  if(valide1)
    private_recopie(pix1,pixel_1);

  if(valide2)
    private_recopie(pix2,pixel_2);

  if(!valide1 && !valide2)
    return(-1.0);

  if(valide1&&valide2)
    return (self->distance)(pixel_1,pixel_2,vrai);

  if(valide1)
    return (self->distance)(pixel_1,pixel_2,faux);


  return (self->distance)(pixel_2,pixel_1,faux);


}
void image_set_distance(image self,PFdist fct_dist)
{
  (self->distance) = fct_dist;
}
int image_give_dim(image self)
{
  return (self->dim);
}
int image_give_largeur(image self)
{
  return (self->largeur);
}
int image_give_hauteur(image self)
{
  return (self->hauteur);
}
static booleen private_valide(image self,int i,int j)
{
  booleen valide;

  valide = (i>=0)&&(j>=0);
  valide = valide&&(i<(self->hauteur))&&(j<(self->largeur));

  return(valide);
}
static void private_recopie(Comp_rgb* pix,int* tab)
{
  int i;

  for(i=0;i<3;i++)
    tab[i] = (int)( pix[i] );
}



static double private_default_distance_dim1(int* pix1,int*
         pix2,booleen valide)
{
  double ret;

  ret = (valide?*pix1- *pix2:*pix1);

  if(ret <0) ret = -ret;

  return ret;
}



static double private_default_distance_dim3(int* pix1,int*
         pix2,booleen valide)
{
  double ret=0;
  int i;

  if(valide)
    {
      for(i=0;i<3;i++)
 {
   ret += ( (*pix1)-(*pix2) )*( (*pix1)-(*pix2) );
   pix1++;
   pix2++;
 }
    }
  else
    {
      for(i=0;i<3;i++)
 {
   ret += (*pix1)*(*pix1);
   pix1++;
 }
    }
  return ret;
}






static int image_dim_1_to_stream_priv(image self,FILE* id)
{
  size_t taille_ind = sizeof(Comp_rgb);
  char date_format[256];
  time_t temps = time(
# 483 "src/image.c" 3 4
                     ((void *)0)
# 483 "src/image.c"
                         );
  struct tm *temps_local = localtime(&temps);
  int var_max = 255;
  int nb_composantes_ecrites;

  strftime(date_format,sizeof date_format, "%x %X", temps_local);


  fprintf(id,"P5\n");
  fprintf(id,"# Derniere  sauvegarde : %s\n",date_format);
  fprintf(id,"%d %d\n",(self->largeur),(self->hauteur));
  fprintf(id,"%d\n",var_max);

  nb_composantes_ecrites = fwrite((self->debut),taille_ind,(self->taille),id);

  if(nb_composantes_ecrites < (self->taille))
    fprintf(
# 499 "src/image.c" 3 4
           stderr
# 499 "src/image.c"
                 ,"ERREUR SYSTEME : Plus de place sur disque");

  fclose(id);

  return 0;
}



static int image_dim_3_to_stream_priv(image self,FILE* id)
{
  size_t taille_comp_RGB = sizeof(Comp_rgb);
  int var_max =255;
  char date_format[256];
  time_t temps = time(
# 513 "src/image.c" 3 4
                     ((void *)0)
# 513 "src/image.c"
                         );
  struct tm *temps_local = localtime(&temps);
  int nb_comp_ecrites;

  strftime(date_format,sizeof date_format, "%x %X", temps_local);


  fprintf(id,"P6\n");
  fprintf(id,"# Derniere  sauvegarde : %s\n",date_format);
  fprintf(id,"%d %d\n",(self->largeur),(self->hauteur));
  fprintf(id,"%d\n",var_max);

  nb_comp_ecrites = fwrite((self->debut),taille_comp_RGB,(self->taille),id);

  if(nb_comp_ecrites < (self->taille))
    fprintf(
# 528 "src/image.c" 3 4
           stderr
# 528 "src/image.c"
                 ,"ERREUR SYSTEME : Plus de place sur disque");

  fclose(id);

  return (0);
}

static void lire_commentaires_priv(FILE* id)
{
  char c1,c2;
  char commentaire[100];

  fscanf(id,"%c%c",&c1,&c2);
  while(c2 =='#')
    {
      do
 {
   fscanf(id,"%s",commentaire);
   fprintf(
# 546 "src/image.c" 3 4
          stderr
# 546 "src/image.c"
                ,"%s ",commentaire);
   fscanf(id,"%c",&c1);
 }
      while(c1 != '\n');
      fscanf(id,"%c",&c2);
      fprintf(
# 551 "src/image.c" 3 4
             stderr
# 551 "src/image.c"
                   ,"\n");
    }
  fseek(id,-1L,
# 553 "src/image.c" 3 4
              1
# 553 "src/image.c"
                      );
}

static void read_ascii_priv(image self,FILE* id)
{
  Comp_rgb *ptr=(self->debut);
  int val;

  while(fscanf(id,"%d",&val) != 
# 561 "src/image.c" 3 4
                               (-1)
# 561 "src/image.c"
                                  )
    {
      *ptr = val;
      ptr++;
    }
}
